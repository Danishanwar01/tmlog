
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Telegram Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <h2>Logging you in‚Ä¶ ‚è≥</h2>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    if (!tg.initData) {
      document.body.innerHTML =
        "<h2>‚ùå Open this inside Telegram @africacryptologinbot</h2>";
      throw new Error("Not inside Telegram");
    }

    fetch("/auth/telegram/callback", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ initData: tg.initData }),
    })
      .then(res => res.json())
      .then(data => {
        if (!data.success) throw new Error("Login failed");

        // üöÄ OPEN WEBSITE AFTER LOGIN
        tg.openLink(data.redirectUrl);

        // Optional: close mini app
        setTimeout(() => tg.close(), 300);
      })
      .catch(err => {
        console.error(err);
        document.body.innerHTML = "<h2>‚ùå Login failed</h2>";
      });
  </script>
</body>
</html>














<!-- <!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>hi Telegram Mini App Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <h2>Logging you in‚Ä¶ ‚è≥</h2>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
  const tg = window.Telegram.WebApp;
  tg.ready();

  if (!tg.initData) {
    document.body.innerHTML = "<h2>‚ùå Open inside Telegram @africacryptologinbot</h2>";
    throw new Error("Not inside Telegram");
  }

  fetch("/auth/telegram/callback", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ initData: tg.initData })
  })
  .then(res => res.text())
  .then(html => {
    document.open();
    document.write(html);
    document.close();
  });
</script>

</body>
</html> -->
